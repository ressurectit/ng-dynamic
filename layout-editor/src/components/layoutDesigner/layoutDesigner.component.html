<div class="designer-overlay" 
     #layoutDesigner
     #dndCore="dndCoreDesigner"
     [dndCoreDesigner]="{metadata: renderedType, parentId: parent?.renderedType?.id, index: index}"
     [dropzoneElement]="layoutDropzone"
     [dragDisabled]="dragDisabled"
     [canDrop]="canDropValue"
     [parentCanDrop]="parent?.canDropValue ?? false"
     [horizontal]="horizontal"
     [parentHorizontal]="parent?.horizontal ?? false"
     [dragSource]="dndCore.drag"
     (dropMetadata)="addDescendant($event)"
     [copyDesignerStyles]="renderedType"
     (mouseleave)="hideOverlay($event)"
     (mouseover)="showOverlay($event)"
     (click)="selectComponent($event)"
     (dblclick)="unselectComponent($event)">
    <div class="designer-dropzone"
         #layoutDropzone
         designerMinWidth
         [canDrop]="canDropValue"
         [horizontal]="parent?.horizontal ?? false"
         [dropTarget]="dndCore.dropzone"
         [isDropZone]="canDropValue">
        <!-- <layout-editor-drag-placeholder class="mat-elevation-z6" *cdkDragPlaceholder></layout-editor-drag-placeholder> -->
        <layout-editor-drag-preview class="mat-elevation-z4" *dndCorePreview [editorMetadata]="editorMetadata" [layoutMetadata]="renderedType"></layout-editor-drag-preview>
        <ng-template #renderer="layoutComponentRenderer" [layoutComponentRenderer]="renderedType" [layoutComponentRendererDisableTransformer]="true"></ng-template>

        <ng-container *ngIf="highlighted || selected">
            <div class="designer-overlay-border"></div>
            <div class="designer-overlay-layout" [layoutDesignerOverlayFor]="renderer"></div>

            <div class="designer-overlay-title"
                 *bodyRender
                 [positionTo]="layoutDesigner"
                 placement="TopStart">{{editorMetadata?.metaInfo?.name ?? renderedType?.name}}</div>

            <ng-container *ngIf="!!parent && parent.editorMetadata?.removeDescendant">
                <div *bodyRender
                     class="designer-overlay-remove"
                     [positionTo]="layoutDesigner"
                     placement="TopEnd"
                     (click)="remove()">
                    <span class="fas fa-times"></span>
                </div>
            </ng-container>
        </ng-container>
    </div>
</div>
